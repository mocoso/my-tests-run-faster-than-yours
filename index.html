<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>My tests run faster than yours</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" />

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  
    
      <script type="text/javascript" src="./js/sh_lang/sh_ruby.min.js"></script>
    
      <script type="text/javascript" src="./js/sh_lang/sh_sh.min.js"></script>
    
  

  
    
    <link rel="stylesheet" href="./file/my-tests.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>
<a tabindex="1" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="stylemenu"><span class="ui-icon ui-icon-triangle-1-s"></span>styles</a>
<div id="stylepicker" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">g</td><td>toggle follow</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
    <tr><td class="key">P</td><td>toggle pause</td></tr>
    <tr><td class="key">s</td><td>choose style</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="followMode">Follow Mode:</span>
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content title-slide" ref="title/title/1">
<p><img src="./file/title/zeus.jpg" width="500" height="362" alt="Zeus"/>

<h1>My tests run faster than yours</h1>

<p>Joel Chippindale</p>

<p>(CTO at Econsultancy)</p></p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="title/title/2">
<h1>Most of my tests for a large rails app run faster than most of your tests for a large rails app and how your tests can run more like mine from tomorrow with Zeus</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="problem/problem/1">
<h1>Do you do TDD/BDD?</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="problem/problem/2">
<h1>Do you work on rails apps?</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="problem/problem/3">
<h1>Do you work on large* rails apps?</h1>

<p>*take 10 or more seconds to start up</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="problem/problem/4">
<h1>Do you do TDD/BDD on large* rails apps?</h1>

<p>*take 10 or more seconds to start up</p>

<div class="notes">
<p>who already uses Zeus?&lt;/ br&gt;
who uses spork?</p>
</div></div>
</div><div class="slide" data-transition="none">
  <div class="content" ref="problem/problem/5">
<h1>Impatience is a virtue</h1>

<p>(demo)</p>

<div class="notes">
<p>bundle exec rspec<br>
zeus rspec<br>
zeus rake<br>
sub two second tests</br>
</br></br>
</p>
</div></div>
</div><div class="slide" data-transition="none"><div class="content" ref="zeus/zeus/1">
<h1>How?</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="zeus/zeus/2">
<h1>Forks</h1>

<p>Creating copies of processes</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="zeus/zeus/3">
<h1>Speculative execution</h1>

<blockquote>
<p>"...do work <em>before</em> it is known whether that work will be needed at
all, so as to prevent a delay that would have to be incurred by doing
the work <em>after</em> it is known whether it is needed"</p>
</blockquote></div>
</div><div class="slide" data-transition="none"><div class="content" ref="zeus/zeus/4">
<h1>Zeus</h1>

<p>Written by Burke Libbey of Shopify</p>

<p>Manages pool of slaves which have preloaded parts of your app and
speculatively replaces them when your code changes.</p>

<p>(demo)</p>

<div class="notes">
<p>show zeus start</p>
</div></div>
</div><div class="slide" data-transition="none"><div class="content" ref="zeus/zeus/5">
<h1>Preloading</h1>

<pre class="sh_ruby"><code>class Zeus::Rails &lt; Zeus::Plan
  ...
  def default_bundle
    Bundler.require(:default)
  end

  def development_environment
    Bundler.require(:development)
    ::Rails.env = ENV['RAILS_ENV'] = "development"
    require APP_PATH
    ::Rails.application.require_environment!
  end
  ...
end</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="zeus/zeus/6">
<h1>Keeping fresh</h1>

<p>Slaves are replaced when any ruby file they have loaded is changed </p>

<div class="notes">
<p>Monkey patches Kernel#load and YAML#load_file and reports back to master which watches these files</p>
</div></div>
</div><div class="slide" data-transition="none"><div class="content" ref="zeus/zeus/7">
<h1>More than just testing</h1>

<pre class="sh_sh"><code>$ zeus console
$ zeus rake
$ zeus server
... </code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="zeus/zeus/8">
<h1>Requirements</h1>

<ul>
<li>Large ruby application</li>
<li>Ruby 1.9.3</li>
</ul></div>
</div><div class="slide" data-transition="none"><div class="content" ref="zeus/zeus/9">
<h1>How do I get the goodness?</h1>

<p>Inside your rails project directory:</p>

<pre class="sh_sh"><code>$ gem install zeus
$ zeus init
$ zeus start</code></pre>

<p>And feel the lightning speed.</p>

<div class="notes">
<p>Remind no need to change your codebase</p>
</div></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="zeus/zeus/10">
<h1>Drawbacks of Zeus</h1>

<ul>
<li>Not (all) written in Ruby</li>
<li>Immature</li>
</ul><div class="notes">
<p>0.0.1 release in July this year</p>
</div></div>
</div><div class="slide" data-transition="none"><div class="content" ref="alternative-solutions/alternative-solutions/1">
<h1>What are the alternatives?</h1>

<p>(and why Zeus is better)</p></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="alternative-solutions/alternative-solutions/2">
<h1>Spork gem</h1>

<ul>
<li>Dumb handling of code changes</li>
<li>Only for tests</li>
<li>Slower</li>
</ul><div class="notes">
<p>show of hands of people who have used<br>
tension between pre/post fork file loading - hours spent working out why your changes are not being applied</br>
</p></div>
</div>
</div><div class="slide" data-transition="none">
  <div class="content bullets" ref="alternative-solutions/alternative-solutions/3">
<h1>Change your app</h1>

<ul>
<li>/spec_no_rails</li>
<li>Hexagonal Rails</li>
<li>Service Orientated Architecture</li>
</ul><div class="notes">
<p>Theme of ruby conferences this year from Scottish Ruby Conference to Aloha Ruby Conference<br>
Fast Rails Tests - Corey Haines - Golden Gate Ruby Conference 2011<br>
Matt Wynne/Steven Tookey - LRUG June 2012<br>
SOA - Songkick blog posts<br>
Potential benefits far beyond testing but lots of work so Zeus in the meantime<br/>
</br></br>
</br>
</br></p></div></div>
</div><div class="slide" data-transition="none"><div class="content end-slide" ref="end/end">
<h1>Try Zeus tomorrow</h1>

<p><a href="https://github.com/burke/zeus">https://github.com/burke/zeus</a></p>

<h2>Thank you for listening</h2>

<p><a href="mailto:joel.chippindale@econsultancy.com">joel.chippindale@econsultancy.com</a>
\
<a href="https://twitter.com/joelchippindale">@joelchippindale</a></p>

<h2>Picture Credits</h2>

<p>Thanks to <a href="http://www.flickr.com/photos/ocularinvasion/3371917114/">ocularinvasion</a> for the picture of Zeus and lightning bolt</p>

<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"/></a></p>
</div>
</div></div>
<div id="pauseScreen">
  Paused !!!
</div>

</body>
</html>
